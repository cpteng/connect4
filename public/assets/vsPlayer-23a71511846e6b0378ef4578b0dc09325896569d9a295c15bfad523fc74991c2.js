function insertChip(e){for(var t,n=!0,r=1;n&&7>r;)t=board.rows[board.rows.length-r],0===$(t).find("td:nth-child("+e+")").html().length?("black"===CURRENT_PLAYER?$(t).find("td:nth-child("+e+")").html(ADD_BLACK_CHIP):$(t).find("td:nth-child("+e+")").html(ADD_WHITE_CHIP),n=!1,checkWinner(t,e)):r++;r>6&&alert("Invalid Move")}function checkWinner(e,t){checkRow(e),checkColumn(t),checkLTRDiagonal(e,t),checkRTLDiagonal(e,t),checkMoves(),updateCurrentPlayer()}function checkRow(e){var t=0;$(e).find("td").each(function(){return $(this).find("div").hasClass(CURRENT_PLAYER)?t++:t=0,4===t?(weHaveAWinner(),!1):void 0})}function checkColumn(e){for(var t,n=1,r=0;7>n;){if(t=board.rows[board.rows.length-n],$(t).find("td:nth-child("+e+")").find("div").hasClass(CURRENT_PLAYER)?r++:r=0,4===r)return weHaveAWinner(),!1;n++}}function checkLTRDiagonal(e,t){for(var n=$(e).index(),r=t;6>n&&r>1;)n++,r--;for(var i=0;n>=1&&7>=r;){var o=board.rows[n];if($(o).find("td:nth-child("+r+")").find("div").hasClass(CURRENT_PLAYER)?i++:i=0,4===i)return weHaveAWinner(),!1;n--,r++}}function checkRTLDiagonal(e,t){for(var n=$(e).index(),r=t;6>n&&7>r;)n++,r++;for(var i=0;n>=1&&r>=1;){var o=board.rows[n];if($(o).find("td:nth-child("+r+")").find("div").hasClass(CURRENT_PLAYER)?i++:i=0,4===i)return weHaveAWinner(),!1;n--,r--}}function checkMoves(){MOVES++,42==MOVES&&draw()}function updateCurrentPlayer(){"black"===CURRENT_PLAYER?(CURRENT_PLAYER="white",$("#insert-row").attr("class","white-player"),$(".current-player span").css("color","white"),$(".current-player span").html("white")):(CURRENT_PLAYER="black",$("#insert-row").attr("class","black-player"),$(".current-player span").css("color","black"),$(".current-player span").html("black"))}function weHaveAWinner(){alert(CURRENT_PLAYER+" wins!"),$("#insert-row button").removeAttr("onclick"),$(".current-player").html(CURRENT_PLAYER+" wins!")}function draw(){alert("Game is a draw!"),$("#insert-row button").removeAttr("onclick")}var board,ADD_BLACK_CHIP="<div class='black'></div>",ADD_WHITE_CHIP="<div class='white'></div>",CURRENT_PLAYER="black",MOVES=0;$("document").ready(function(){board=document.getElementById("board")});